<div class="stats-container">
  <div class="stats-header">
    <h1>ğŸ“Š EstadÃ­sticas de tu ColecciÃ³n</h1>
    <p class="subtitle">AnÃ¡lisis completo de tus videojuegos</p>
    <div class="header-actions">
      <button class="btn-back" routerLink="/games">â† Volver a la colecciÃ³n</button>
      <button class="btn-logout" (click)="logout()">ğŸšª Cerrar SesiÃ³n</button>
    </div>
  </div>
  
  <div class="summary-cards">
    <div class="stat-card card-purple">
      <div class="card-icon">ğŸ®</div>
      <div class="card-content">
        <h3>Total de Juegos</h3>
        <p class="big-number">{{ totalJuegos }}</p>
      </div>
    </div>

    <div class="stat-card card-yellow">
      <div class="card-icon">â­</div>
      <div class="card-content">
        <h3>CalificaciÃ³n Promedio</h3>
        <p class="big-number">{{ promedioCalificacion }}/10</p>
      </div>
    </div>

    <div class="stat-card card-green">
      <div class="card-icon">âœ…</div>
      <div class="card-content">
        <h3>Completados</h3>
        <p class="big-number">{{ getCompletados() }}</p>
      </div>
    </div>

    <div class="stat-card card-blue">
      <div class="card-icon">ğŸ¯</div>
      <div class="card-content">
        <h3>En Progreso</h3>
        <p class="big-number">{{ getJugando() }}</p>
      </div>
    </div>
  </div>

  <div class="charts-grid">
    <div class="chart-card">
      <h2>ğŸ“ˆ Estado de los Juegos</h2>
      <div class="estado-stats">
        @for (stat of estadisticasEstado; track stat.estado) {
          <div class="estado-item">
            <div class="estado-info">
              <span [ngClass]="getEstadoClass(stat.estado)" class="estado-badge">
                {{ stat.estado }}
              </span>
              <span class="cantidad">{{ stat.cantidad }} juegos ({{ stat.porcentaje }}%)</span>
            </div>
            <div class="progress-bar">
              <div 
                class="progress-fill" 
                [ngClass]="getEstadoClass(stat.estado)"
                [style.width.%]="stat.porcentaje"
              ></div>
            </div>
          </div>
        }
      </div>
    </div>

    <div class="chart-card">
      <h2>ğŸ¯ Top Plataformas</h2>
      <div class="plataforma-stats">
        @for (plat of plataformasStats; track plat.nombre) {
          <div class="plataforma-item">
            <div class="plataforma-label">
              <span class="nombre">{{ plat.nombre }}</span>
              <span class="cantidad">{{ plat.cantidad }}</span>
            </div>
            <div class="bar-container">
              <div 
                class="bar-fill" 
                [style.width.%]="getBarWidthPlataforma(plat.cantidad)"
              ></div>
            </div>
          </div>
        }
      </div>
    </div>

    <div class="chart-card">
      <h2>ğŸ­ GÃ©neros Favoritos</h2>
      <div class="genero-stats">
        @for (gen of generosStats; track gen.nombre) {
          <div class="genero-item">
            <div class="genero-circle">{{ gen.cantidad }}</div>
            <div class="genero-info">
              <h4>{{ gen.nombre }}</h4>
              <p>{{ gen.cantidad }} juego@if (gen.cantidad !== 1) {<span>s</span>}</p>
            </div>
          </div>
        }
      </div>
    </div>

    <div class="chart-card">
      <h2>ğŸ•’ Ãšltimos Juegos Agregados</h2>
      <div class="timeline">
        @for (game of ultimosJuegos; track game.id) {
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <h4>{{ game.titulo }}</h4>
              <p class="timeline-meta">
                {{ game.plataforma }} â€¢ {{ game.genero }}
                <span [ngClass]="getEstadoClass(game.estado)" class="mini-badge">
                  {{ game.estado }}
                </span>
              </p>
            </div>
          </div>
        }
      </div>
    </div>
  </div>

  @if (totalJuegos === 0) {
    <div class="empty-state">
      <p>ğŸ“­ No hay juegos para mostrar estadÃ­sticas</p>
      <p class="hint">Agrega algunos juegos para ver tus estadÃ­sticas</p>
    </div>
  }
</div>